<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Napidő</title>
<link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
<script src="/cdn-cgi/apps/head/SSaYB9_3atmGiB-OssOQcKheRog.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Style+Script">
<link rel="stylesheet" href="static/css/main.css">
<link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">

<link rel="apple-touch-icon" href="static/apple-icon-180.png">

<meta name="apple-mobile-web-app-capable" content="yes">

<link rel="apple-touch-startup-image" href="static/apple-splash-2048-2732.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="static/apple-splash-2732-2048.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
<link rel="apple-touch-startup-image" href="static/apple-splash-1668-2388.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="apple-splash-2388-1668.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
<link rel="apple-touch-startup-image" href="static/apple-splash-1536-2048.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="static/apple-splash-2048-1536.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
<link rel="apple-touch-startup-image" href="static/apple-splash-1668-2224.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="static/apple-splash-2224-1668.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
<link rel="apple-touch-startup-image" href="static/apple-splash-1620-2160.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="static/apple-splash-2160-1620.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
<link rel="apple-touch-startup-image" href="static/apple-splash-1290-2796.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="static/apple-splash-2796-1290.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
<link rel="apple-touch-startup-image" href="static/apple-splash-1179-2556.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="static/apple-splash-2556-1179.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
<link rel="apple-touch-startup-image" href="static/apple-splash-1284-2778.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="static/apple-splash-2778-1284.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
<link rel="apple-touch-startup-image" href="static/apple-splash-1170-2532.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="static/apple-splash-2532-1170.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
<link rel="apple-touch-startup-image" href="static/apple-splash-1125-2436.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="static/apple-splash-2436-1125.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
<link rel="apple-touch-startup-image" href="static/apple-splash-1242-2688.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="static/apple-splash-2688-1242.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
<link rel="apple-touch-startup-image" href="static/apple-splash-828-1792.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="static/apple-splash-1792-828.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
<link rel="apple-touch-startup-image" href="static/apple-splash-1242-2208.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="static/apple-splash-2208-1242.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)">
<link rel="apple-touch-startup-image" href="static/apple-splash-750-1334.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="static/apple-splash-1334-750.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
<link rel="apple-touch-startup-image" href="static/apple-splash-640-1136.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="static/apple-splash-1136-640.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
<script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
            navigator.serviceWorker.register('/static/service-worker.js')
            .then(function(registration) {
                console.log('Service worker registered successfully');
            })
        .catch(function(err) {
            console.error('Error registering service worker: ', err);
        });
        });
    }

    function updateClock() {
        let now = new Date();
        let hours = now.getHours();
        let minutes = now.getMinutes();
        let formattedMinutes = minutes.toString();
        if (minutes < 10) {
            formattedMinutes = "0" + formattedMinutes;
        }
        let time = hours + ":" + formattedMinutes;
        document.getElementById("clock").textContent = time;
    }
    setInterval(updateClock, 1000);

    let mp = '{{ masodperc }}';
    let perc = '{{ perc }}';
    let ora = '{{ ora }}';
    
    let variable1 = parseInt(mp);
    let variable2 = parseInt(perc);
    let variable3 = parseInt(ora);

    setInterval(() => {
        variable1++;
        if (variable1 === 60) {
        variable1 = 0;
        }
    }, 1000);

    setInterval(() => {
        if (variable1 === 0) {
        variable2++;
        if (variable2 === 60) {
            variable2 = 0;
        }
        }
    }, 1000);

    setInterval(() => {
        if (variable2 === 0 && variable1 === 0) {
        variable3++;
        if (variable3 === 24) {
            variable3 = 0;
        }
        }
    }, 1000);

    setInterval(() => {
        let formattedVariable1 = variable1.toString();
        if (variable1 < 10) {
        formattedVariable1 = "0" + formattedVariable1;
        }
        if (isNaN(variable1)) {
            document.getElementById("variable1").textContent = "--";
            const now = new Date();
            const seconds = now.getSeconds();
            let formattedSeconds = seconds;
            if (seconds < 10) {
                formattedSeconds = "0" + formattedSeconds;
            }
            document.getElementById("variable1Akt").textContent = formattedSeconds;
        } else {
            document.getElementById("variable1").textContent = formattedVariable1;
            document.getElementById("variable1Akt").textContent = formattedVariable1;
        }
    }, 100);

    setInterval(() => {
        let formattedVariable2 = variable2.toString();
        if (variable2 < 10) {
        formattedVariable2 = "0" + formattedVariable2;
        }
        if (isNaN(variable2)) {
            document.getElementById("variable2").textContent = "--";
            document.getElementById("variable2Mod").textContent = "--";
        } else {
        document.getElementById("variable2").textContent = formattedVariable2;
        document.getElementById("variable2Mod").textContent = formattedVariable2;
        }
    }, 100);

    setInterval(() => {
        if (isNaN(variable3)) {
            document.getElementById("variable3").textContent = "--";
            document.getElementById("variable3Mod").textContent = "--";
        } else {
            document.getElementById("variable3").textContent = variable3;
            document.getElementById("variable3Mod").textContent = variable3;
        }
    }, 100);
</script>
</head>
<body onload="updateClock">
    <main>
    <h1 class="text-center">Napidő</h1>
     <div class="text-center">
        <form autocomplete="off" method="POST" action="/varosadat">
            <input type="text" id="inp" name="inp" placeholder="Település vagy városrész neve">
            <br><br>
            <div id="mobileBreak"></div>
            <div class="address-list-outer">
                <div id="address-list"></div>
            </div>
            <script>
                const apiKey = '2ed27eaf716d4ed2be37d3f54b09c628'; // helyettesítsd az API kulcsoddal
                const input = document.querySelector('#inp');
                const list = document.querySelector('#address-list');
                const mobileBreak = document.getElementById('mobileBreak');

                input.addEventListener('input', () => {
                    const query = input.value;
                    list.innerHTML = '';
                    if (query.length > 2) { // csak akkor hajtunk végre keresést, ha a lekérdezés legalább 3 karakter hosszú
                    axios.get(`https://api.geoapify.com/v1/geocode/autocomplete?text=${query}&type=city&apiKey=${apiKey}`)
                        .then((response) => {
                        const results = response.data.features.slice(0, 3); // csak az első 3 találatot jelenítjük meg
                        if (results.length > 0) {
                            list.style.display = 'block'; // megjelenítjük a listát
                            mobileBreak.style.display = 'block';
                            results.forEach((result) => {
                            const li = document.createElement('li');
                            li.innerText = result.properties.formatted;
                            li.addEventListener('click', () => {
                                input.value = result.properties.formatted;
                                list.style.display = 'none'; // elrejtjük a listát
                                mobileBreak.style.display = 'none';
                            });
                            list.appendChild(li);
                            });
                        } else {
                            list.style.display = 'none'; // ha nincs találat, elrejtjük a listát
                            mobileBreak.style.display = 'none';
                        }
                        })
                        .catch((error) => {
                    console.error(error);
                    });
                    } else {
                    list.style.display = 'none'; // ha a lekérdezés nem elég hosszú, elrejtjük a listát
                    mobileBreak.style.display = 'none';
                    }
                });

                // bezárjuk a listát, ha a felhasználó kattint az oldalon kívülre
                document.addEventListener('click', (event) => {
                    if (!list.contains(event.target)) {
                    list.style.display = 'none';
                    mobileBreak.style.display = 'none';
                    }
                });
            </script>            
            <input class="btn btn-secondary" type="submit" value="Lekérdezés">
        </form> 
    </div>
    <div style="height: 85px"></div>
    <div class="container text-center">
	<h1 class="suntime"><strong><b><span id="variable3"></span>:<span id="variable2"></span></strong></b></h1>
	<p>
		<i>
			<b>{{ varos }}</b>
			<br>
			Északi szélesség: <b>{{ szel }}</b> 
			<br>
			Nyugati hosszúság: <b>{{ hossz }}</b>
                        <br>
			Az aktuális idő: <b><span id="clock"></span>:<span id="variable1Akt"></span></b>
		</i>
	</p>
    </div>
    <div style="height: 85px"></div>    
    <div class="text-center">
        <h3>További számítások</h3>
        <p>A módosult napidő: <b><span id="variable3Mod"></span>:<span id="variable2Mod"></span>:<span id="variable1"></span></b></p>
        <p>A delelési idő: <b>{{ del_ido }}</b></p>
        <p>A delelési magasság: <b>{{ del_mag }}</b></p>
        <p>A dátum sorszáma: <b>{{ sorszam }}</b></p>
        <p>A napfelkelte: <b>{{ napfelkelte }}</b></p>
        <p>A napnyugta: <b>{{ napnyugta }}</b></p>
        <p>A nap hossza: <b>{{ nap_hossz }}</b></p>    
    </div>
     <button id="info-button">i</button>

  <div id="info-box">
    <div id="info-content">
      <div>
        <b class="info-box-heading">Suntime - Napidő<br>v0.3.5</b>
        <br>
        <b class="info-box-subheading-desc">(Fejlesztette: dr. Stonawski Tamás és Stonawski Benjamin)</b>
        <br>
        <br>
        <br>
        <p class="info-box-desc">A Napidő alkalmazás megmondja, hogy a nap jelenlegi állása szerint, több számítást végrehajtva mennyi a valós idő. Ha egy napórát megnézünk az általunk beírt településen, ezt az időt olvasnánk le, hiszen a közönséges, aktuális idő országhatároktól függően zónaidőt használ, ez pedig a nap állásának elvét.</p>
        <br>
        <b class="info-box-desc">Az alkalmazás jelenleg béta verziójú, és fejlesztés alatt áll, így előfordulhatnak problémák. Jelenleg van egy probléma, aminek a javításán dolgozunk, mégpedig az, hogy ne csak magyar városokkal működjön megfelelően a program.</b>
        <br>
        <a href="static/changelog.html">Változási napló megtekintése</a>
        <br>
        <br>
        <br>
        <b class="info-box-subheading">Hogyan tudom megnézni, hogy mennyi a napidő?</b>
        <br>
        <br>
        <p class="info-box-desc">A “Település vagy városrész neve” mezőbe írhatod be a település nevét, aminek meg szeretnéd nézni a napidejét. Nagyobb városok esetén ajánljuk, hogy ne a város nevét, hanem a városrészt írd be (például Budapest helyett Óbuda, Nyíregyháza helyett Örökösföld, Mátészalka helyett Fellegvár, stb.), hiszen különböző városrészek között is eltérhet a napidő! Ha nem városrészt írsz be, hanem csak településnevet, akkor az alkalmazás a település földrajzi középpontjánál fogja elvégezni a számításokat. Nem muszáj a teljes nevet beírni, hiszen ha elkezded begépelni azt, az alkalmazás feldobja a lehetséges település- és városneveket, amelyek közül választhatsz.</p>
        <br>
        <br>
        <br>
        <b class="info-box-subheading">Tud-e még valamit ezen kívűl?</b>
        <br>
        <br>
        <p class="info-box-desc">A napidőn kívűl az alkalmazás kiszámítja a településen a nap delelési idejét, és delelési magasságát (szögét) is. Ezek mellett láthatod még a jelenlegi dátum sorszámát, és hogy mennyi az aktuális zónaidő, annak érdekében, hogy könnyen összehasonlíthasd a nap- és zónaidő közti különbséget, valamint a napfelkeltét, a napnyugtát és a nap hosszát is képes precízen és pontosan kiszámolni.</p>
        <br>
        <br>
        <br>
        <b class="info-box-subheading">Le tudom tölteni valahol alkalmazásként?</b>
        <br>
        <br>
        <p class="info-box-desc">Természetesen, hiszen ez egy PWA (progresszív webalkalmazás), amit könnyen letölthetsz telefonodra. Az oldal megosztása gombra koppintva hozzáadhatod a főképernyőhöz az alkalmazást.</p>
        <br>
        <br>
        <br>
        <b class="info-box-subheading">Hogyan működik mindez?</b>
        <br>
        <br>
        <p class="info-box-desc">A Napidő alkalmazás a Python nyelvet és a Flask keretrendszert kombinálva számítja ki az általad megadott település napidejét, majd a megjelenítéshez, és az idő frissítéséhez JavaScript nyelvet használ.</p>
        <br>
        <br>
        <a href="static/aszf.html">Adatvédelmi nyilatkozat (ÁSZF)</a>
      </div>
      <button id="close-button">X</button>
    </div>
  </div>
  <div id="info-box-background"></div>
    </main>
</body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="static/js/infobox.js"></script>
</html>
